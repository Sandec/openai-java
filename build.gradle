plugins {
    id "com.vanniktech.maven.publish" version "0.19.0" apply false
}

allprojects {
    plugins.withId("com.vanniktech.maven.publish") {
        mavenPublish {
            sonatypeHost = "S01"
        }
    }
}

configure([project(':api'), project(':client'), project(':service')]) {
    apply plugin: 'maven-publish'

    afterEvaluate {
        publishing {
            publications {
                maven(MavenPublication) {
                    from components.java

                    groupId = "$GROUP"
                    artifactId = project.name
                    version = "$VERSION_NAME"
                }
            }

            java {
                withSourcesJar()
                withJavadocJar()
            }

            repositories {
                maven {
                    name = "artifactory"
                    url = "https://sandec.jfrog.io/artifactory/repo"
                    credentials {
                        username System.getenv("SANDEC_ARTIFACTORY_USERNAME")
                        password System.getenv("SANDEC_ARTIFACTORY_PASSWORD")
                    }
                }
            }
        }
    }
}
